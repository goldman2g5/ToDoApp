@page "/"
@inject NavigationManager NavigationManager
@using ToDoApp.Client.Models;
@using ToDoApp.Client.Data;
@using Syncfusion.Blazor.Data
@using System.Collections.ObjectModel
@using System.ComponentModel

<MudButton @onclick=NewBoard>New Board</MudButton>


<MudGrid Spacing="5" Justify="Justify.Center">
    @foreach (BoardClient i in Boards)
    {
                    <MudItem>
                        <MudCard>
                            <MudCardContent>
                                <MudText Typo="Typo.h5">@i.Name</MudText>
                            </MudCardContent>
                            <MudCardActions>
                                <MudButton Variant="Variant.Text" Color="Color.Primary" @onclick="() => GoToBoard(i.Id)">Open</MudButton>
                            </MudCardActions>
                        </MudCard>
                    </MudItem>
    }
</MudGrid>


@code {
    public List<BoardClient> Boards = new List<BoardClient>();


    protected override async Task OnInitializedAsync()
    {
        Boards = await BoardService.GetAll();
    }

    public void NewBoard()
    {
        BoardClient board = new BoardClient();
        board.Name = "bebra board";
        Boards.Add(board);
        BoardService.Create(board);
        StateHasChanged();
    }

    public void GoToBoard(int id)
    {
        NavigationManager.NavigateTo($"/Board/{id}");
    }
}